using UnityEngine;
using System.Collections;

public class Ball : MonoBehaviour {
//========================================================================================
// 定数
//========================================================================================
	
	
//========================================================================================
// 変数
//========================================================================================
	//--public----------------------

	
	//--pirvate---------------------
	private Vector2 m_velocity;
	private bool m_flag;

	
//========================================================================================
// 関数
//========================================================================================
	//--------------------------------------------------------
	// 初期化処理
	//--------------------------------------------------------
	void Start () 
	{
		m_flag = false;
	}
	
	//--------------------------------------------------------
	// 更新処理
	//--------------------------------------------------------
	void Update () 
	{
		m_velocity = this.rigidbody2D.velocity;
	}

	//--------------------------------------------------------
	// 移動ベクトルを変更
	//--------------------------------------------------------
	public void OnCollisionEnter2D(Collision2D other)
	{
		if(m_flag == true && other.gameObject.tag == "Block")
		{
			this.rigidbody2D.velocity = m_velocity;
			Destroy(other.gameObject);
		}
	}

	//--------------------------------------------------------
	// 移動ベクトルを変更
	//--------------------------------------------------------
	public void AddForce(Vector2 force)
	{
		this.rigidbody2D.AddForce (force);
	}


	//--------------------------------------------------------
	// モードを切り替える
	//--------------------------------------------------------
	public void ChangeMode()
	{
		if (m_flag == true)	m_flag = false;
		else 				m_flag = true;
	}
}
