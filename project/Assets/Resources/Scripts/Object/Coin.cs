using UnityEngine;
using System.Collections;

public class Coin : MonoBehaviour {
	//========================================================================================
	// 定数
	//========================================================================================
	
	
	//========================================================================================
	// 変数
	//========================================================================================
	//--public----------------------
	
	
	//--pirvate---------------------
	

	//========================================================================================
	// プロパティ。イベント
	//========================================================================================
	public delegate void CollisionWithBallEventHandler();
	public event CollisionWithBallEventHandler OnCollidesWithBall;
	
	//========================================================================================
	// 関数
	//========================================================================================
	//--------------------------------------------------------
	// 初期化処理
	//--------------------------------------------------------
	void Start () 
	{
		
	}
	
	//--------------------------------------------------------
	// 更新処理
	//--------------------------------------------------------
	void Update () 
	{
		
	}

	//--------------------------------------------------------
	// 衝突時処理
	//--------------------------------------------------------
	private void OnTriggerEnter2D(Collider2D other)
	{		
		// ボールだったら
		if (other.gameObject.tag == "Ball")
		{			
			// イベントハンドラを呼び出し, エフェクトを生成
			if (OnCollidesWithBall != null) this.OnCollidesWithBall();
			GameObject effect = Instantiate( Resources.Load( @"Prefabs/Particles/GetCoin" ) ) as GameObject;
			effect.transform.position = this.transform.position;
			Destroy(this.gameObject);
		}
	}
}
